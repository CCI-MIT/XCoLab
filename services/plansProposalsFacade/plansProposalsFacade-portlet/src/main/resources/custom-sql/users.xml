<custom-sql>

    <sql id="com.ext.portlet.service.persistence.User_Finder.getUsersSortedByScreenNameAsc">
        <![CDATA[
			SELECT * FROM User_ as us ORDER BY us.screenName ASC
		]]>
    </sql>

    <sql id="com.ext.portlet.service.persistence.User_Finder.getUsersSortedByScreenNameDesc">
        <![CDATA[
			SELECT * FROM User_ as us ORDER BY us.screenName DESC
		]]>
    </sql>

    <sql id="com.ext.portlet.service.persistence.User_Finder.getUsersSortedByActivityCountAsc">
        <![CDATA[
			SELECT count(*), userId FROM SocialActivity group by userId order by count(*) ASC
		]]>
    </sql>

    <sql id="com.ext.portlet.service.persistence.User_Finder.getUsersSortedByActivityCountDesc">
        <![CDATA[
			SELECT count(*), userId FROM SocialActivity group by userId order by count(*) DESC
		]]>
    </sql>

    <sql id="com.ext.portlet.service.persistence.User_Finder.getUsersSortedByRoleNameAsc">
        <![CDATA[
			SELECT  u.*, r.*
FROM User_ u
    INNER JOIN
    (
        SELECT ur.userId, MAX(roleOrdinal) roleOrdinal
        FROM Users_Roles ur
	INNER JOIN Role_ r
ON ur.roleId = r.roleId
        GROUP BY ur.userId
    ) b ON u.userId = b.userId
INNER JOIN Role_ r
ON r.roleOrdinal = b.roleOrdinal
ORDER BY r.categoryName ASC
		]]>
    </sql>

    <sql id="com.ext.portlet.service.persistence.User_Finder.getUsersSortedByRoleNameDesc">
        <![CDATA[
			SELECT  u.*, r.*
FROM User_ u
    INNER JOIN
    (
        SELECT ur.userId, MAX(roleOrdinal) roleOrdinal
        FROM Users_Roles ur
	INNER JOIN Role_ r
ON ur.roleId = r.roleId
        GROUP BY ur.userId
    ) b ON u.userId = b.userId
INNER JOIN Role_ r
ON r.roleOrdinal = b.roleOrdinal
ORDER BY r.categoryName DESC
		]]>
    </sql>

    <sql id="com.ext.portlet.service.persistence.User_Finder.getUsersSortedByMemberSinceAsc">
        <![CDATA[
			SELECT * FROM User_ as us ORDER BY us.createDate ASC
		]]>
    </sql>

    <sql id="com.ext.portlet.service.persistence.User_Finder.getUsersSortedByMemberSinceDesc">
        <![CDATA[
			SELECT * FROM User_ as us ORDER BY us.createDate DESC
		]]>
    </sql>

</custom-sql>