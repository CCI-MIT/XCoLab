<?xml version="1.0"?>
<f:view xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:liferay-faces="http://liferay.com/tld/faces"
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    >
    <f:subview rendered="#{feedsBean.activitiesBean.feedStyle != 'FULL'}">
    
  
        <ui:repeat value="#{feedsBean.activitiesBean.activities}" var="activity">
            <div class="activitybox #{activity.odd ? '' : 'blu'}">
                <div class="status #{activity.type.displayName}"></div>
                <div class="text">
                    <h3>#{activity.activityDateAgo}</h3>
                    <ice:outputText value="#{activity.body}" escape="false" />
                </div>
            </div>
        
        </ui:repeat>
  
     </f:subview>
     <f:subview rendered="#{feedsBean.activitiesBean.feedStyle == 'FULL'}">
     <ice:form>
     	<ice:panelSeries value="#{feedsBean.activitiesBean.activities}" var="activity" id="activitiesTable" rows="20">
            <ice:panelGroup styleClass="activitybox #{activity.odd ? '' : 'blu'}" style="width: 100%;">
                <ice:panelGroup styleClass="status #{activity.type.displayName}"></ice:panelGroup>
                <ice:panelGroup styleClass="text" style="width: 750px; margin-top: 20px;">Cannot add the same component twice
                    <ice:outputText value="#{activity.body}" escape="false" nospan="true" />
                </ice:panelGroup>
                 <h3 style="float: right; margin-top: 20px; margin-right:10px;">#{activity.activityDateAgo}</h3>
            </ice:panelGroup>
            <div class="clear clearfix"></div>
        
        </ice:panelSeries>
        
        <ice:panelGroup styleClass="pager">
            <table style="margin: auto;">
            
                <tr>
                <td class="paginatorControls">
                    <ice:dataPaginator rendered="true" for="activitiesTable" paginator="#{true}" paginatorMaxPages="#{1000}" styleClass="comm_controls" style="display: inline;">
                        <f:facet name="first" rendered="true">
                            <ice:panelGroup >First</ice:panelGroup>
                        </f:facet>
                        <f:facet name="last" rendered="true">
                            <ice:panelGroup styleClass="">Last</ice:panelGroup>
                        </f:facet>
                        <f:facet name="previous" rendered="true">
                            <ice:panelGroup styleClass="pagerPrev">&lt; Prev</ice:panelGroup>
                        </f:facet>
                        <f:facet name="next">
                            <ice:panelGroup styleClass="">Next &gt;</ice:panelGroup>
                        </f:facet>
                    </ice:dataPaginator>
                </td>
            </tr>
          </table>
          <div class="clear"></div>
          
          
        </ice:panelGroup>  
          </ice:form>
          
          
        <f:subview rendered="#{not empty feedsBean.activitiesBean.filterUserId}">      
            <script type="text/javascript">
                var filterSettings = {
                    filterUserId: #{feedsBean.activitiesBean.filterUserId},
                    filterUserName: '#{feedsBean.activitiesBean.filterUser.screenName}'
                };
            </script>  
        </f:subview>
        
     </f:subview>
</f:view>
