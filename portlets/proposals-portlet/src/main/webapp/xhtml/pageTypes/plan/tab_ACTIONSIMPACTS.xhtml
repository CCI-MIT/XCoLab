<?xml version="1.0"?>
<f:view xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:liferay-faces="http://liferay.com/tld/faces"
    xmlns:collab="http://climatecollaboratorium.org/facelets"
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <ice:form>
    
    
    <ice:commandLink styleClass="editStateTrigger hidden" value="Edit" actionListener="#{simulationBean.editActions}" />
    <ice:panelGroup styleClass="hidden">
        <script type="text/javascript">
            Collab.nav.addEditorDirtyValidationCallback(checkIfActionsImpactsDirty);
        </script>
    </ice:panelGroup>
    
    <ice:panelGroup styleClass='hidden'>
    
        <script type="text/javascript">
            // #{simulationBean.display}
            Collab.nav.unblock();
        </script>
        
    </ice:panelGroup>
    
    <div class="versionsContainer hidden">
        <div class="versions">
            <ice:dataTable value="#{planBean.plan.planModelRunVersionItems}" rows="10" var="historyItem" styleClass="historyTable" rowClasses="odd,even">
            
                <ice:column style="width: 700px;">
                    <ice:commandLink
                                     actionListener="#{planBean.plan.selectModelRunVersion}" onclick="triggerVersionsContainerVisibility()" >
                        <ice:outputText value="#{historyItem.updateDate}">
                        <f:convertDateTime type="both" dateStyle="short" timeStyle="short"/>
                        </ice:outputText>
                        <f:attribute name="item" value="#{historyItem}"/>
                    </ice:commandLink>

                </ice:column>
                <ice:column>
                    <em>
                        by&amp;nbsp;
                        <collab:userLinkSimple userId="#{historyItem.updateAuthor.userId}" text="#{historyItem.updateAuthor.screenName}"/>
                    </em>


                </ice:column>
            </ice:dataTable>
            <br/>

        </div>
    </div>
    
    <div class="actboxtop">
        <div class="type"><strong>Model:</strong> #{contest.contest.contestModelDescription}</div>
    </div>
           
         
        
    
    <div class="clear"></div>

    <ice:panelGroup styleClass="actionsImpactsContainer">
        <ice:panelGroup styleClass="versionInfo" rendered="#{not planBean.plan.simulationLatestVersion}">
            Viewing version from &amp;nbsp; <strong><ice:outputText
                value="#{planBean.plan.simulationVersionDate}"/></strong> by &amp;nbsp;
            <a href="/web/guest/members?userId=#{planBean.plan.simulationVersionAuthor.userId}">
                <strong><ice:outputText value="#{planBean.plan.simulationVersionAuthor.screenName}"/></strong>
            </a>
        </ice:panelGroup>
        <ice:panelGroup styleClass="inputsAndOutputsWidget" rendered="#{planBean.plan.selectedModel != null}">
            
                <collab:simulationView simulationId="#{planBean.plan.selectedModel}" showEditButton="#{permissions.canEdit}"
                                   scenarioId="#{planBean.plan.planModelRunScenarioId}" rendered="#{not simulationBean.embeddedEditing}"/>
        </ice:panelGroup>
        
            
    <div class="clearfix"></div>
        <ice:panelGroup styleClass="inputsAndOutputsWidget" rendered="#{planBean.plan.selectedModel == null}">
            No model has been set.
        </ice:panelGroup>


    </ice:panelGroup>
    
    
    </ice:form>    

</f:view>