<?xml version="1.0"?>
<f:view xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:liferay-faces="http://liferay.com/tld/faces"
    xmlns:collab="http://climatecollaboratorium.org/facelets"
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <ice:form>
    
    
    <ice:commandLink styleClass="editStateTrigger hidden" value="Edit" actionListener="#{simulationBean.editActions}" />
    <ice:panelGroup styleClass="hidden">
        <script type="text/javascript">
            Collab.nav.addEditorDirtyValidationCallback(checkIfActionsImpactsDirty);
        </script>
    </ice:panelGroup>
    
    <ice:panelGroup styleClass='hidden'>
    
        <script type="text/javascript">
            // #{simulationBean.display}
            Collab.nav.unblock();
        </script>
        
    </ice:panelGroup>
    
    <div class="actboxtop">
        <div class="type"><strong>Model:</strong> #{contest.contest.contestModelDescription}</div>
    </div>
    
    <div class="clear"></div>
    
    
    <ice:panelGroup styleClass="actionsImpactsContainer">
        <ice:panelGroup styleClass="versionInfo" rendered="#{not planBean.plan.simulationLatestVersion}">
            Viewing version from &#160; <strong><ice:outputText
                value="#{planBean.plan.simulationVersionDate}"/></strong> by &#160;
            <a href="/web/guest/members?userId=#{planBean.plan.simulationVersionAuthor.userId}">
                <strong><ice:outputText value="#{planBean.plan.simulationVersionAuthor.screenName}"/></strong>
            </a>
        </ice:panelGroup>
        <ice:panelGroup styleClass="inputsAndOutputsWidget" rendered="#{planBean.plan.selectedModel != null}">
                <collab:simulationEdit simulationId="#{planBean.plan.selectedModel}"
                                   scenarioId="#{planBean.plan.planModelRunScenarioId}" 
                                   editActions="#{planBean.planOpenForEditing}" />
                        
                    
        </ice:panelGroup>
        
            <br />
            <div class="act-edit-box_left">
                <p>Select varying levels of geographic disaggregation for the actions</p>
                <div class="select-pro_wrap">
                    <ice:selectOneMenu value="#{planBean.modelBean.selectedItem}" styleClass="selectbox1" style="width: 191px;" partialSubmit="true" valueChangeListener="#{planBean.modelBean.modelChagnedListener}">
                        <f:selectItems value="#{planBean.modelBean.availableModels}"/>
                    </ice:selectOneMenu>
                    <script type="text/javascript">
                        jQuery(document).ready(function() {initSelectbox()});
                    </script>
                </div>

            </div>
    
        <div class="act-edit-box_right">
            <p>You can also upload your own disaggregation mode</p>
            <div class="butt_wrap">
                <div class="button"><a href="/web/guest/resources/-/wiki/Main/Upload+model+help"><span>CONTRIBUTE</span> model</a></div>
            </div>
        
        </div>
    
    <div class="clearfix"></div>
        <ice:panelGroup styleClass="inputsAndOutputsWidget" rendered="#{planBean.plan.selectedModel == null}">
            No model has been set.
        </ice:panelGroup>


    </ice:panelGroup>
    
    
    <div class="admin-overlay-wrap">
        <div class="admin-overlay">
            <div class="inner">
                <div class="admin-left">
                    <p>
                        <f:subview rendered="#{proposal.plan.version le 1}">
                            You are currently editing a new proposal
                        </f:subview>
                        <f:subview rendered="#{proposal.plan.version gt 1}">
                            You are editing a proposal
                        </f:subview>
                    <br />
                    "#{proposal.plan.name}"</p>
                    <div class="blue-button"><ice:commandLink value="SAVE changes" actionListener="#{simulationBean.saveScenario}" onclick="convertTypedValuesToNumbers();"/></div> 
                    <div class="gray-button"><ice:commandLink value="DISCARD changes" actionListener="#{proposal.toggleEditing}" /></div>
                </div>
                <div class="admin-right">
                    <p>&#160;</p>
                </div>
            </div>
        </div>
</div>
    
    
    </ice:form>    

</f:view>