<?xml version="1.0"?>
<!--
  ~ Copyright (c) 2010. M.I.T. All Rights Reserved
  ~ Licensed under the MIT license. Please see http://www.opensource.org/licenses/mit-license.php
  ~ or the license.txt file included in this distribution for the full text of the license.
  -->

<f:view
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ice="http://www.icesoft.com/icefaces/component"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:collab="http://climatecollaboratorium.org/facelets"
        xmlns:sharedcollab="http://climatecollaboratorium.org/components">
    <ice:dataTable var="singleContest" value="#{contests}" styleClass="contestlist #{cls} ">
        <ice:column style="width: 366px;">
            <div style="position: relative;">
                <f:subview rendered="#{not empty singleContest.flagText}">
                    <span class="#{not empty singleContest.flagTooltip ? 'fieldWithTooltip' : ''}">#{singleContest.flagText}:&#160;</span>
                    <f:subview rendered="#{not empty singleContest.flagTooltip}">
                        <div class="tooltip">#{singleContest.flagTooltip}<div class="tt-arrow"></div></div>
                    </f:subview>
                </f:subview>
                <collab:contestLink contestId="#{singleContest.contestId}" text="#{singleContest.shortName}:" />
                #{singleContest.name}
            </div>
        </ice:column>
        <ice:column style="width: 31px" styleClass="g">#{singleContest.proposalsCount}</ice:column>
        <ice:column style="width: 35px" >
        	<ice:panelGroup>
        		<ice:outputText value="#{singleContest.commentsCount}"  rendered="#{not singleContest.activePhase.canVote}" />
        		<ice:outputText value="#{singleContest.votesCount}" rendered="#{singleContest.activePhase.canVote}" />
        	</ice:panelGroup>
        </ice:column>
        <ice:column style="width: 153px" styleClass="g">
            <ui:include src="./widget_WHAT_WHERE_WHO.xhtml">
                <ui:param name="whatWhoWhere" value="#{singleContest.what}" />
            </ui:include>
        </ice:column>
        <ice:column style="width: 140px" >
            <ui:include src="./widget_WHAT_WHERE_WHO.xhtml">
                <ui:param name="whatWhoWhere" value="#{singleContest.where}" />
            </ui:include>
        </ice:column>
        <ice:column style="width: 140px" styleClass="g">
            <ui:include src="./widget_WHAT_WHERE_WHO.xhtml">
                <ui:param name="whatWhoWhere" value="#{singleContest.who}" />
            </ui:include>
        </ice:column>
    </ice:dataTable>

</f:view>