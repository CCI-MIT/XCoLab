<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2010. M.I.T. All Rights Reserved
  ~ Licensed under the MIT license. Please see http://www.opensource.org/licenses/mit-license.php
  ~ or the license.txt file included in this distribution for the full text of the license.
  -->

<f:view xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:liferay-faces="http://liferay.com/tld/faces">

    <ice:panelGroup styleClass="modelDescription" rendered="#{not simulationDetailsBean.tabEditing}">
        <p><ice:outputText value="#{simulationDetailsBean.description}" escape="false" /></p>
    </ice:panelGroup>
    
    <ice:panelGroup styleClass="modelDescription" rendered="#{simulationDetailsBean.tabEditing}">
        <p><ice:outputText value="#{simulationDetailsBean.description}" escape="false" /></p>
        <ice:inputTextarea value="#{simulationDetailsBean.description}" styleClass="profile_about ckeditor"  />
        
        <ice:commandButton value="Submit" actionListener="#{simulationDetailsBean.updateSimulation}"  onclick="updateTextarea();" />
        
        <script>
        	function updateTextarea() {
        		for (var instance in CKEDITOR.instances) {
        			CKEDITOR.instances[instance].updateElement();
        		}
        	}
      
        	CKEDITOR.replaceAll();
        </script>
    </ice:panelGroup>
    
</f:view>