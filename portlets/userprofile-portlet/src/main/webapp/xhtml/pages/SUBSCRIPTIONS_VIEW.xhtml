<?xml version="1.0"?>
<f:view xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:liferay-faces="http://liferay.com/tld/faces"
    xmlns:h="http://java.sun.com/jsf/html"  
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:collab="http://climatecollaboratorium.org/facelets"
    xmlns:ice="http://www.icesoft.com/icefaces/component" 
    >
  
    <div id="bread" class="pro">
        <a href="/web/guest/community">Community</a>
        <img src="/collaboratorium-theme/images/arrow.gif" width="8" height="8" />
        <a href="/web/guest/members">Members</a>
        <img src="/collaboratorium-theme/images/arrow.gif" width="8" height="8" />
        <a href="/web/guest/member/-/member/userId/#{currentUser.userId}">#{currentUser.screenName}</a>
        <img src="/collaboratorium-theme/images/arrow.gif" width="8" height="8" />
        Subscriptions
    </div>
  
    <div id="content">
  
    <div class="main_long">
                 <ice:form>
      <h1>Subscribed activities</h1>
      <ice:dataTable var="activity" value="#{userprofileBean.subscribedActivities}" id="activitiesTable" styleClass="colab" rowClasses='nt,t' rows="50">
        <ice:column style="width: 585px">
            <f:facet name="header">Activity</f:facet>
            #{activity.body}
        </ice:column>
        
        <ice:column style="width: 140px">
            <f:facet name="header">Date</f:facet>
                <ice:outputText value="#{activity.createdDate}">
                    <f:convertDateTime pattern="MM/dd/yy hh:mm a"/>
                </ice:outputText>
            
        </ice:column>
      
      </ice:dataTable>
                 <ice:panelGroup styleClass="pager">
            <table style="float: right;">
                <tr>

                    <td>
                        <ice:dataPaginator for="activitiesTable" rowsCountVar="rowsCount" displayedRowsCountVar="displayedRowsCountVar" 
                                firstRowIndexVar="firstRowIndex" lastRowIndexVar="lastRowIndex" pageCountVar="pageCount" 
                                pageIndexVar="pageIndex" >
                            <ice:outputFormat value="Page {0} of {1}" styleClass="page" escape="false">
                                <f:param value="#{pageIndex}" />
                                <f:param value="#{pageCount}" />
                            </ice:outputFormat>
                        </ice:dataPaginator>
                </td>     
                <td class="paginatorControls">
                    <ice:dataPaginator rendered="true" for="activitiesTable" paginator="true" paginatorMaxPages="5" styleClass="comm_controls" style="display: inline;"> 
                        <f:facet name="first" rendered="true">
                            <ice:panelGroup >First</ice:panelGroup>
                        </f:facet>
                        <f:facet name="last" rendered="true">
                            <ice:panelGroup styleClass="">Last</ice:panelGroup>
                        </f:facet>
                        <f:facet name="previous" rendered="true">
                            <ice:panelGroup styleClass="pagerPrev">&lt; Prev</ice:panelGroup>
                        </f:facet>
                        <f:facet name="next">
                            <ice:panelGroup styleClass="">Next &gt;</ice:panelGroup>
                        </f:facet>
                    </ice:dataPaginator>
                </td>
            </tr>
          </table>
          <div class="clear"></div>
          
          
          </ice:panelGroup> 
          </ice:form>
    </div>
    <ice:panelGroup rendered="#{userprofileBean.viewingOwnProfile}" styleClass="right_col3">
    
      <div class="blue-button">
        <a href="./#{currentUser.userId}/page/subscriptionsManage">MANAGE</a>
      </div>

    </ice:panelGroup>
        
        <div class="clearfix"></div>

  </div> <!-- /content -->
  </f:view>
  